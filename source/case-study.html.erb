<%# CONFIG %>
<%# COMMENT: Storing `data/global/nav.json` data %>
<% nav = data.global.nav %>
<%# COMMENT: Storing `data/global/footer.json` data %>
<% footer = data.global.footer %>
<%# COMMENT: Storing `data/sections/home.json` data %>
<% article = locals[:article] %>
<%# COMMENT: Define next and previous articles based on current article's index %>
<% neighbor_articles = fetch_neighbors(article._index) %>
<% previous_article = neighbor_articles[0] %>
<% next_article = neighbor_articles[1] %>
<%# END %>
<%# Component: Nav %>
<%= partial("components/global/nav", :locals => {
      :image => nav.image,
      :links => nav.links,
      :contact => nav.contact
}) %>
<main>
  <article>
    <%# Component: Header %>
    <%= partial("components/content/header", :locals => {
          :title => article.title,
          :subtitle => article.header.title,
          :text => article.header.text
    }) %>
    <%# List: Content Components %>
    <% article.content.each_with_index do |component, index| %>
      <%# Component: Image %>
      <% if component.type === "Image" %>
        <%= partial("components/content/image", :locals => {
              :src => component.image.src,
              :alt => component.image.alt,
              :caption => component.image.caption
        }) %>
      <% end %>
      <%# Component: Image Gallery %>
      <% if component.type === "Image Gallery" %>
        <%= partial("components/content/image_gallery", :locals => {
              :images => component.images
        }) %>
      <% end %>
      <%# Component: Image Stack %>
      <% if component.type === "Image Stack" %>
        <%= partial("components/content/image_stack", :locals => {
              :top => component.images.top,
              :bottom => component.images.bottom
        }) %>
      <% end %>
      <%# Component: Double-Column Paragraph %>
      <% if component.type === "Double-Column Paragraph" %>
        <%= partial("components/content/double_column_paragraph", :locals => {
              :type => component.paragraph.type,
              :title => component.paragraph.title,
              :first_column => component.paragraph.first_column,
              :second_column => component.paragraph.second_column
        }) %>
      <% end %>
      <%# Component: Quote %>
      <% if component.type === "Quote" %>
        <%= partial("components/content/quote", :locals => {
              :quote => component.quote.text,
              :author => component.quote.author
        }) %>
      <% end %>
    <% end %>
  </article>
  <%# Component: Controller %>
  <%= partial("components/content/controller", :locals => {
        :previous_article => previous_article.title,
        :next_article => next_article.title
  }) %>
</main>
<%# Component: Footer %>
<%= partial("components/global/footer", :locals => {
      :copyright => footer.copyright,
      :social => footer.social
}) %>
